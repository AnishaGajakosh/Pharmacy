<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Product Details — CareKart</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div style="display:flex;gap:12px;align-items:center">
        <div class="hamburger" id="hamburger" aria-label="Open menu">
          <span></span><span></span><span></span>
        </div>
        <a class="logo" href="index.html">CareKart</a>
      </div>
      <nav class="main-nav">
        <a href="index.html">Home</a>
        <a href="products.html">Products</a>
        <a href="cart.html">Cart (<span id="cart-count">0</span>)</a>
      </nav>
      <div class="titlebar">Safe medicines • Fast delivery</div>
    </div>
  </header>

  <main class="container">
    <a href="products.html" class="back-arrow">← Back</a>
    <div id="product-detail" class="product-detail"></div>
  </main>

  <footer class="site-footer">
    <div class="container">© <span id="year"></span> CareKart. All rights reserved.</div>
  </footer>

  <script src="products.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Cart counter
    const cartCount = (JSON.parse(localStorage.getItem('cart') || '[]')).reduce((s, i) => s + i.quantity, 0);
    document.getElementById('cart-count').textContent = cartCount;

    const params = new URLSearchParams(window.location.search);
    const productId = params.get("id");

    function renderProduct() {
      const product = (window.PRODUCTS || []).find(p => p.id === productId);
      const container = document.getElementById("product-detail");
      if (!product) {
        container.innerHTML = "<p>Product not found.</p>";
        return;
      }
      container.innerHTML = `
        <div class="detail-card">
          <img src="${product.image}" alt="${product.name}" class="detail-image">
          <div class="detail-info">
            <h1>${product.name}</h1>
            <p class="category">Category: ${product.category}</p>
            <p>${product.description}</p>
            <p><strong>Price:</strong> ₹ ${product.price.toFixed(2)}</p>
            <button class="btn-add" id="addCartBtn">Add to Cart</button>
          </div>
        </div>
      `;
      document.getElementById("addCartBtn").addEventListener("click", () => {
        const cart = JSON.parse(localStorage.getItem("cart") || "[]");
        const existing = cart.find(it => it.id === product.id);
        if (existing) existing.quantity += 1;
        else cart.push({ id: product.id, name: product.name, price: product.price, quantity: 1 });
        localStorage.setItem("cart", JSON.stringify(cart));
        document.getElementById("cart-count").textContent = cart.reduce((s, i) => s + i.quantity, 0);
        alert(`${product.name} added to cart`);
      });
    }

    document.addEventListener("productsLoaded", renderProduct);
  </script>
  <style>
    /* Product detail page */
.detail-card {
  display: flex;
  gap: 24px;
  align-items: flex-start;
  background: #fff;
  padding: 20px;
  border-radius: 14px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
  margin-top: 20px;
}

.detail-image {
  width: 280px;
  height: auto;
  border-radius: 12px;
  object-fit: contain;
  flex-shrink: 0;
}

.detail-info {
  flex: 1;
}

.detail-info h1 {
  margin: 0 0 10px;
  font-size: 1.6rem;
  color: var(--text);
}

.detail-info .category {
  font-size: 0.9rem;
  color: var(--muted);
  margin-bottom: 12px;
}

.detail-info p {
  margin-bottom: 12px;
  line-height: 1.6;
}

.detail-info strong {
  color: var(--primary-dark);
}

.detail-info .btn-add {
  background: var(--primary);
  color: #fff;
  border: none;
  padding: 10px 18px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1rem;
  transition: background 0.2s;
}

.detail-info .btn-add:hover {
  background: var(--primary-dark);
}
</style>
</body>
</html>
